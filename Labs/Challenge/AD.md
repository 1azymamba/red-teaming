# AD in OSCP A
## Time
iniaccess = 3H 16min
foothold = 3H 23min
privesc

※iniaccessはdiscordヒントあり。exploitコードのデバッグは自分でできたのでおｋ

## 教訓
- 全ポート、特に80系はブラウザからアクセスして確認すること(nmapにサービスのらないものがあるので)

## 手順
1. rustscanでポートのチェックから。22, 80, 81, 135, 139, 445, 3306, 3307とかが空ている。
2. とりあえず135のrpc匿名ログインからチェック。rpcclient -U "" -N 192.168.174.66かます。ディナイされる。
3. 139と445もあるのでSMBの匿名ログオンチェック。smbclient --no-pass -L <IP>。ディナイされる。
4. port 80でWebの手動チェック。その間にffufしておく。scriptが見つかったりユーザ名のリスト作ったりできた。crackmapexec等も試すがDCと通信できないのでここからiniaccessにつなげられず。
5. 80ポートでつまっていたのでDiscordでヒント見る。81ポートをブラウザでチェックしろと言われた。確かに。81の存在を忘れてた。チェックしてみる。
6. あやしげなサイト発見。ffufして怪しいディレクトリや認証情報とかも見つかるものの、認証情報はここでは使えず。
7. でぃぐってpublic exploitを見つけてくる。使ってみたが上手く動かず。pythonのコードチェックして、わんちゃんパスが悪そうだったのでいじくってみたら動いた。ここでiniaccessをウェブシェル経由で取得。
8. 