# web02

## Time
foothold = 2H 27min  
privesc = 4H 20min

※footholdノーヒント👏
※privescノーヒント👏

## 教訓
1. ホストめちゃ多くても1行ずつrustscanの結果を見て評価する
2. rustscanの複数ホスト一括スキャンが便利
3. 全体をrustscan => 各ポートのありそうな脆弱性をメモしておく&匿名ログインなどすぐ確かめられるものはその場で試してAttack surfaceにアタリをつけておく(aimとかのメモに残しておく)
4. 権限昇格はwinpeasの読み込みゲーだ！
5. fidstrしてなんもでんかったらwinpeasがよさげ


## 手順
1. 8台あるPublicホストにそれぞれrustscanとffufをしていく
2. このweb02が名前解決失敗してる風のことがスキャン結果に書いてあったので名前解決して手動でWebに入ってみる
3. スキャン結果の中にftpじゃないけどFileZillaっていうftp的なやつが14020ポートで走ってるのが分かる
4. anonymousログオンできて、かつファイルも読み取れるようなことがスキャンから分かる
5. anonymousログオンしてpdfファイルをgetする
6. pdfのなかに開発関連のユーザ名とパスワードがのっているので確認して、同じweb02サーバのUIからCMSの管理画面にアクセス
7. CMSのバージョンが分かるので、その詳細バージョンでAuthenticate RCEがないか探す
8. POCがあるのでVerifiedじゃないけど中身みて安全そうなので使う
9. コード改修も必要なくRCE成功👏

10. 権限昇格ねらってゆく。とりま平文パスワード探し。これが慣れてないけど、findstr /si C:\*.txtみたいにして探していくのが良さげ
11. sqlとかxamppぽいパスワード見つかったけど使い物にならず、しばらくだらだらパスワード探しに時間を溶かす。
12. あきらめてwinpeasに書いてあったDLL Hijackingを試す。正確にはサービスバイナリハイジャック？
13. 成功して見事systemに👏

## 総括
- 時間かけすぎたけどノーヒントのprivescに成長を感じた👏
- winpeasに慣れるしか。