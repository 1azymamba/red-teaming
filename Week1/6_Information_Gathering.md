# ペンテストにおける情報収集(Information Gathering)について

## PassiveとActive
Passiveはターゲットと直接的なやりとりをしないので、ほとんど相手に迷惑をかけずに情報収集ができる
Activeは通信が発生するので場合によっては注意されたりIPブロックされる可能性がある
Active scanは通信が直接的に発生するため、相手に攻撃者の痕跡やヒントを与えることになるので、なるべくPassiveで情報収集するのが好ましい。

## Passive Enumeration
Passive Enumeration = OSINTでもある。ターゲットとの直接的な通信ややり取りは基本的には発生しない。
しかし、より厳密な定義では以下の2つのアプローチがある

1. ターゲットシステム・もしくはサーバにはアクセスしない
2. ターゲットシステムやWebサーバなどでアカウントの登録などを行うのはOK

上記のどちらもPassive Scanとしては正しい。一般的なユーザとしてターゲットにアクセスする分にはPassiveの域内ということになりそう。
Pentestにおいては、テストの目的や範囲、ルールによって上記の2つのアプローチから選択するかたちになるらしい。

> [!Tips]
> OffSecに記載されていた実例として、このようなものがあった。
> > インターネットに繋がっていない企業があった。OffSecは、|などの高度なGoogleクエリを使用し、社用のメールアドレスで掲示板に**珍しい切手の募集**を行っている従業員の投稿を見つけた。OffSecは、ランディングページを作成して、切手会社を装うためにドメイン名を取得して架空の会社を偽った。ターゲットの従業員の勤務時間中に電話をかけ、コンタクトし、不正なwebページに誘導してリバースシェルを行った。
インターネットに全く公開されておらずAttack Surfaceが無いように見える企業も、このようなPassive Enumerationを駆使することで攻撃に繋げることができる例。

### Whois
基本的なwhois検索
```
whois <ターゲットドメイン名> -h <使用するDNSサーバ>
whois example.com -h 192.168.50.251
```

表示されるデータすべてが役立つわけではないが、いくつかは貴重な情報が見つかる。
例えば、ドメイン名を登録した人間の名前が分かったりする。その名前をターゲットのサイトから調べて、役職を調べることにもつなげられる。

ターゲットのIPが分かれば、逆引きでより多くの情報を収集できる。
```
whois 38.100.193.70 -h 192.168.50.251
```

## Active Scan
##
##
##